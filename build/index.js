(()=>{var e=wp.i18n.__,t=wp.blocks.registerBlockType,l=wp.blockEditor,a=l.InspectorControls,n=(l.InspectorAdvancedControls,l.BlockControls),r=l.MediaUpload,o=l.MediaUploadCheck,i=l.useBlockProps,c=l.PanelColorSettings,m=wp.components,d=m.PanelBody,u=m.Button,s=m.ToggleControl,v=m.TextControl,g=m.RangeControl,p=m.SelectControl,h=m.ColorPicker,b=m.ToolbarGroup,f=m.ToolbarButton,R=(m.Dropdown,m.ColorPalette,wp.components.__experimentalUnitControl||v),w=wp.element,y=(w.useState,w.useEffect),E=w.useRef;t("hm/hm-model-viewer-3d",{title:e("3D Model Viewer","hm-hm-model-viewer-3d"),description:e("Embed 3D models using model-viewer","hm-hm-model-viewer-3d"),icon:"format-image",category:"media",supports:{align:["left","center","right","wide","full"],spacing:{margin:!0,padding:!0}},attributes:{src:{type:"string",default:""},alt:{type:"string",default:"3D Model"},autoRotate:{type:"boolean",default:!1},cameraControls:{type:"boolean",default:!0},environmentImage:{type:"string",default:""},skyboxImage:{type:"string",default:""},exposure:{type:"number",default:1},shadowIntensity:{type:"number",default:1},width:{type:"string",default:"100%"},height:{type:"string",default:"400px"},backgroundColor:{type:"string",default:"#ffffff"},loading:{type:"string",default:"auto"},reveal:{type:"string",default:"auto"}},edit:function(t){var l=t.attributes,m=t.setAttributes,w=l.src,x=l.alt,C=l.autoRotate,k=l.cameraControls,I=l.environmentImage,S=l.skyboxImage,A=l.exposure,B=l.shadowIntensity,T=l.width,D=l.height,M=l.backgroundColor,W=l.loading,z=l.reveal,F=i({className:"hm-model-viewer-3d-block"}),O=E(null),N=function(e){m({src:e.url,alt:e.alt||"3D Model"})};return y(function(){if(O.current&&w){O.current.innerHTML="";var e=document.createElement("model-viewer");e.setAttribute("src",w),e.setAttribute("alt",x),e.style.width=T,e.style.height=D,e.style.backgroundColor=M,C&&e.setAttribute("auto-rotate",""),k&&e.setAttribute("camera-controls",""),I&&e.setAttribute("environment-image",I),S&&e.setAttribute("skybox-image",S),1!==A&&e.setAttribute("exposure",A),1!==B&&e.setAttribute("shadow-intensity",B),"auto"!==W&&e.setAttribute("loading",W),"auto"!==z&&e.setAttribute("reveal",z),O.current.appendChild(e)}},[w,x,C,k,I,S,A,B,T,D,M,W,z]),React.createElement(React.Fragment,null,w&&React.createElement(n,null,React.createElement(b,null,React.createElement(o,null,React.createElement(r,{onSelect:N,allowedTypes:["model/gltf-binary","model/gltf+json"],value:w,render:function(t){var l=t.open;return React.createElement(f,{onClick:l,icon:"update"},e("Replace","hm-model-viewer-3d"))}})))),React.createElement("div",F,w?w?React.createElement("div",{ref:O,className:"model-viewer-container",style:{minHeight:"300px"}}):React.createElement("div",{className:"model-viewer-placeholder"},React.createElement("p",null,e("No 3D model selected","hm-model-viewer-3d"))):React.createElement(o,null,React.createElement(r,{onSelect:N,allowedTypes:["model/gltf-binary","model/gltf+json"],value:w,render:function(t){var l=t.open;return React.createElement(u,{onClick:l,className:"button button-large",style:{display:"block",width:"100%",textAlign:"center",padding:"20px",border:"2px dashed #ccc",backgroundColor:"#f9f9f9"}},e("Select 3D Model File","hm-model-viewer-3d"))}}))),React.createElement(a,null,React.createElement(d,{title:e("Model Settings","hm-model-viewer-3d"),initialOpen:!0},React.createElement(v,{label:e("Alt Text","hm-model-viewer-3d"),value:x,onChange:function(e){return m({alt:e})}})),React.createElement(d,{title:e("Interaction Controls","hm-model-viewer-3d"),initialOpen:!1},React.createElement(s,{label:e("Auto Rotate","hm-model-viewer-3d"),checked:C,onChange:function(e){return m({autoRotate:e})},help:e("Automatically rotate the model","hm-model-viewer-3d")}),React.createElement(s,{label:e("Camera Controls","hm-model-viewer-3d"),checked:k,onChange:function(e){return m({cameraControls:e})},help:e("Allow users to control the camera","hm-model-viewer-3d")}),React.createElement(p,{label:e("Loading","hm-model-viewer-3d"),value:W,options:[{label:"Auto",value:"auto"},{label:"Lazy",value:"lazy"},{label:"Eager",value:"eager"}],onChange:function(e){return m({loading:e})}}),React.createElement(p,{label:e("Reveal","hm-model-viewer-3d"),value:z,options:[{label:"Auto",value:"auto"},{label:"Interaction",value:"interaction"},{label:"Manual",value:"manual"}],onChange:function(e){return m({reveal:e})}})),React.createElement(d,{title:e("Lighting & Environment","hm-model-viewer-3d"),initialOpen:!1},React.createElement(g,{label:e("Exposure","hm-model-viewer-3d"),value:A,onChange:function(e){return m({exposure:e})},min:0,max:3,step:.1}),React.createElement(g,{label:e("Shadow Intensity","hm-model-viewer-3d"),value:B,onChange:function(e){return m({shadowIntensity:e})},min:0,max:3,step:.1}),React.createElement("div",{style:{marginBottom:"16px"}},React.createElement("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},e("Environment Image","hm-model-viewer-3d")),I?React.createElement("div",{style:{display:"flex",alignItems:"center",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f9f9f9"}},React.createElement("img",{src:I,alt:e("Environment Image","hm-model-viewer-3d"),style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"4px",marginRight:"12px"}}),React.createElement("div",{style:{flex:1}},React.createElement("div",{style:{fontSize:"14px",fontWeight:"500"}},I.split("/").pop().substring(0,30),"...")),React.createElement(u,{onClick:function(){return m({environmentImage:""})},isDestructive:!0,variant:"tertiary",size:"small"},e("Remove","hm-model-viewer-3d"))):React.createElement(o,null,React.createElement(r,{onSelect:function(e){m({environmentImage:e.url})},allowedTypes:["image"],value:I,render:function(t){var l=t.open;return React.createElement(u,{onClick:l,variant:"secondary",style:{width:"100%"}},e("Select Environment Image","hm-model-viewer-3d"))}}))),React.createElement("div",{style:{marginBottom:"16px"}},React.createElement("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},e("Skybox Image","hm-model-viewer-3d")),S?React.createElement("div",{style:{display:"flex",alignItems:"center",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f9f9f9"}},React.createElement("img",{src:S,alt:e("Skybox Image","hm-model-viewer-3d"),style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"4px",marginRight:"12px"}}),React.createElement("div",{style:{flex:1}},React.createElement("div",{style:{fontSize:"14px",fontWeight:"500"}},S.split("/").pop().substring(0,30),"...")),React.createElement(u,{onClick:function(){return m({skyboxImage:""})},isDestructive:!0,variant:"tertiary",size:"small"},e("Remove","hm-model-viewer-3d"))):React.createElement(o,null,React.createElement(r,{onSelect:function(e){m({skyboxImage:e.url})},allowedTypes:["image"],value:S,render:function(t){var l=t.open;return React.createElement(u,{onClick:l,variant:"secondary",style:{width:"100%"}},e("Select Skybox Image","hm-model-viewer-3d"))}}))))),React.createElement(a,{group:"styles"},React.createElement(d,{title:e("Dimensions","hm-model-viewer-3d"),initialOpen:!0},R&&React.createElement(React.Fragment,null,React.createElement(R,{label:e("Width","hm-model-viewer-3d"),value:T,onChange:function(e){return m({width:e||"100%"})},units:[{value:"px",label:"px"},{value:"%",label:"%"},{value:"em",label:"em"},{value:"rem",label:"rem"},{value:"vw",label:"vw"}]}),React.createElement(R,{label:e("Height","hm-model-viewer-3d"),value:D,onChange:function(e){return m({height:e||"400px"})},units:[{value:"px",label:"px"},{value:"%",label:"%"},{value:"em",label:"em"},{value:"rem",label:"rem"},{value:"vh",label:"vh"}]})),!R&&React.createElement(React.Fragment,null,React.createElement(v,{label:e("Width","hm-model-viewer-3d"),value:T,onChange:function(e){return m({width:e})},help:e("CSS width value (e.g., 100%, 500px)","hm-model-viewer-3d")}),React.createElement(v,{label:e("Height","hm-model-viewer-3d"),value:D,onChange:function(e){return m({height:e})},help:e("CSS height value (e.g., 400px, 50vh)","hm-model-viewer-3d")}))),c&&React.createElement(c,{title:e("Color","hm-model-viewer-3d"),initialOpen:!1,colorSettings:[{value:M,onChange:function(e){return m({backgroundColor:e||"#ffffff"})},label:e("Background","hm-model-viewer-3d")}]}),!c&&React.createElement(d,{title:e("Color","hm-model-viewer-3d"),initialOpen:!1},React.createElement("div",{style:{marginBottom:"16px"}},React.createElement("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"}},e("Background Color","hm-model-viewer-3d")),React.createElement(h,{color:M,onChangeComplete:function(e){return m({backgroundColor:e.hex})}})))))},save:function(){return null}})})();